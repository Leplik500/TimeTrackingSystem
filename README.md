# TimeTrackingSystem

#### <code>Система учета рабочего времени</code>

##### Содержание

- [О проекте](#о-проекте)
- [Возможности](#возможности)
- [Технологии](#технологии)
- [Начало работы](#начало-работы)
    - [Предварительные условия](#предварительные-условия)
    - [Развёртывание](#развёртывание)
    - [Установка](#установка)
    - [Запуск](#запуск)
- [API документация](#api-документация)
- [Тестирование](#тестирование)
- [Лицензия](#лицензия)

---

## О проекте

<code>TimeTrackingSystem — это ASP.NET Core Web API приложение для учета
рабочего времени сотрудников на проектах и задачах с визуализацией данных</code>

Система предназначена для управления проектами, задачами и учета времени,
затраченного сотрудниками. Основные цели проекта:

- Обеспечение прозрачного учета рабочего времени
- Контроль выполнения задач в рамках проектов
- Аналитика и визуализация временных затрат
- Предоставление REST API для интеграции с другими системами

---

## Возможности

### Управление проектами

- Создание, редактирование и удаление проектов
- Присвоение уникальных кодов проектам
- Управление статусом активности проектов

### Управление задачами

- Создание задач в рамках проектов
- Отслеживание статуса выполнения задач
- Контроль активности задач для учета времени

### Учет рабочего времени

- Создание проводок времени для задач
- Валидация дневного лимита часов (не более 24 часов в день)
- Автоматическая проверка активности задач
- Просмотр проводок по датам и месяцам

### Аналитика

- Получение дневной сводки часов с расчетом статусов
- Статусы: insufficient (< 8 часов), sufficient (= 8 часов), excessive (> 8
  часов)
- Фильтрация и сортировка данных

---

## Технологии

- **ASP.NET Core 8.0**: Основной фреймворк для разработки Web API
- **Entity Framework Core**: ORM для работы с базой данных
- **Microsoft SQL Server**: Система управления базами данных
- **Swagger/OpenAPI**: Документация и тестирование API
- **NLog**: Логирование событий и ошибок
- **MSTest + NSubstitute**: Фреймворки для юнит-тестирования

---

## Начало работы

### Предварительные условия

Для развёртывания:
> [**Docker**](https://www.docker.com/products/docker-desktop/)

Для установки без Docker:
> [**.NET**](https://dotnet.microsoft.com/ru-ru/download/dotnet/8.0):
`version 8.0`  
> [**Microsoft SQL Server
**](https://www.microsoft.com/en-us/sql-server/sql-server-downloads): `2019+`

## Развёртывание

Чтобы развёрнуть приложение, выполните команду:

` docker-compose up --build `

### Установка

Соберите проект из исходников:

1. Склонируйте репозиторий:

` git clone https://github.com/Leplik500/TimeTrackingSystem `

2. Перейдите в директорию проекта:

` cd TimeTrackingSystem `

3. Установите зависимости:

#### Microsoft SQL Server

1. Запустите службу SQL Server
2. Создайте базу данных и установите данные пользователя, как указано в
   ConnectionStrings в файле `appsettings.json`

Установите пакеты dotnet и соберите проект:

` dotnet restore `

` dotnet build `

### Запуск

Чтобы запустить приложение, выполните команду:

` dotnet run --project TimeTrackingAPI `

API будет доступно по адресу: http://localhost:8080 (или порт, указанный в
`launchSettings.json`)

---

## API документация

### Swagger UI

После запуска приложения документация API доступна по адресу:

- **Swagger UI**: http://localhost:8080/index.html

### Основные эндпоинты

#### Проекты

- **GET /api/projects**: Получение списка всех проектов
- **GET /api/projects/{id}**: Получение проекта по ID
- **POST /api/projects**: Создание нового проекта
- **PUT /api/projects/{id}**: Обновление проекта
- **DELETE /api/projects/{id}**: Удаление проекта

#### Задачи

- **GET /api/tasks**: Получение списка всех задач
- **GET /api/tasks/{id}**: Получение задачи по ID
- **POST /api/tasks**: Создание новой задачи
- **PUT /api/tasks/{id}**: Обновление задачи
- **DELETE /api/tasks/{id}**: Удаление задачи

#### Проводки времени

- **GET /api/time-entries**: Получение всех проводок времени
- **GET /api/time-entries/date/{date}**: Получение проводок за конкретную дату
- **GET /api/time-entries/month/{year}/{month}**: Получение проводок за месяц
- **GET /api/time-entries/daily-summary**: Получение дневной сводки часов
- **POST /api/time-entries**: Создание новой проводки времени

Полный список эндпоинтов и их описание доступны в Swagger UI.

---

## Тестирование

### Запуск всех тестов

` dotnet test `

### Структура тестов

- **Controllers Tests**: Тестирование HTTP логики, валидации и делегирования
- **Services Tests**: Тестирование бизнес-логики и работы с базой данных

---

## Лицензия

Этот проект защищен
лицензией [Mozilla Public License 2.0](https://choosealicense.com/licenses/mpl-2.0/).
Для получения более подробной информации обратитесь к
файлу [LICENSE](https://choosealicense.com/licenses/mpl-2.0/).
